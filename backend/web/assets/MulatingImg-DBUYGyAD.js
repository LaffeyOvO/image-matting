import{u as C,E as B,r as u,y as I,o as M,a,c as n,b as e,t as l,g as d,F as P,l as $,C as j,m as F}from"./index-D1CJl6Y2.js";import{a as h}from"./ai_matting-DPxnUe2y.js";import{m as p}from"./message-B7YrNn6S.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const L={class:"flex justify-center w-full h-full items-center"},A={class:"w-3/4 max-w-2xl rounded-lg p-6"},z={class:"flex justify-between items-center mb-4"},D={class:"text-lg font-bold"},E={class:"badge badge-info"},N={class:"space-y-2 max-h-96 w-full overflow-y-auto"},V=["src"],R={class:"grow ml-4 flex flex-col truncate"},S=["title"],q=["title"],G={class:"flex-none btn btn-circle btn-ghost ml-4"},H=["onClick"],J=e("circle",{cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4",class:"opacity-25"},null,-1),K=e("path",{fill:"currentColor",d:"M4 12a8 8 0 017.5-7.98A4 4 0 104 12h4z",class:"opacity-75"},null,-1),O=[J,K],Q=["onClick"],T=e("path",{stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"},null,-1),U=[T],W=["onClick"],X=e("path",{stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"},null,-1),Y=[X],Z={key:0,class:"mt-6 text-center"},tt={key:1,class:"mt-6 text-center"},lt={__name:"MulatingImg",setup(et){const{t:c}=C(),f=B(),r=u(""),i=u([]);u(!0);const _=u(!0),w=I(()=>i.value.filter(s=>s.status==="processed").length),v=async()=>{console.log("start deal image");for(let s=0;s<i.value.length;s++){const o=i.value[s];if(_.value===!0){if(o.status==="waiting"){console.log("deal image",o.image_path,r.value);const t=await h("predict_from_folder_img",{image_path:o.image_path,folder_path:r.value});t.code===200?(o.status="processed",o.no_bg_image=t.data.no_bg_image):(o.status="error",p.error(t.error_msg))}}else return}_.value=!1},x=()=>{_.value=!1},k=async()=>{const s=await h("get_folder_images",r.value);s.code===200?i.value=s.data.image_list:p.error(s.error_msg)},y=()=>{window.history.back()},g=async s=>{await F("open_and_select_file",s)};return M(async()=>{r.value=f.params.folderPath,console.log(r.value,"foldersPath"),await k(),await v()}),(s,o)=>(a(),n("div",L,[e("div",A,[e("div",z,[e("h2",D,l(d(c)("ai_matting.mult_matting.title")),1),e("span",E,l(d(c)("ai_matting.mult_matting.processing"))+" "+l(w.value)+" / "+l(i.value.length),1)]),e("ul",N,[(a(!0),n(P,null,$(i.value,(t,b)=>(a(),n("li",{key:b,class:"flex p-2 rounded-lg"},[e("img",{src:t.base64_image,alt:"image",class:"w-16 h-16 rounded flex-none"},null,8,V),e("div",R,[e("p",{class:"truncate",title:t.image_name},l(t.image_name),9,S),e("p",{class:"text-xs text-gray-400 truncate",title:t.image_path},l(t.image_path),9,q)]),e("span",G,[t.status==="waiting"?(a(),n("svg",{key:0,onClick:m=>g(t.image_path),xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",class:"w-6 h-6 animate-spin"},O,8,H)):t.status==="processed"?(a(),n("svg",{key:1,onClick:m=>g(t.no_bg_image),xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",class:"w-6 h-6 text-green-500"},U,8,Q)):t.status==="error"?(a(),n("svg",{key:2,onClick:m=>g(t.image_path),xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",class:"w-6 h-6 text-red-500"},Y,8,W)):j("",!0)])]))),128))]),_.value?(a(),n("div",Z,[e("button",{onClick:o[0]||(o[0]=t=>x()),class:"bg-green-500 text-white px-4 py-2 rounded-full"},l(d(c)("ai_matting.mult_matting.finish")),1)])):(a(),n("div",tt,[e("button",{onClick:o[1]||(o[1]=t=>y()),class:"bg-green-500 text-white px-4 py-2 rounded-full"},l(d(c)("ai_matting.btn_back")),1)]))])]))}};export{lt as default};
