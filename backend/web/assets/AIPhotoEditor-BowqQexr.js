import{u as N,E as $,j as q,r as t,A as G,o as J,a as s,c as p,H as C,C as d,h as I,I as w,b as l,t as c,g as i,F as O,l as z,m as U}from"./index-MjFPWu0o.js";import{I as P}from"./ImageCroperView-BmsvzW7g.js";import{a as K}from"./ai_matting-DVP65GRm.js";import{m as S}from"./message-CyredAYb.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const Q={class:"container mx-auto"},W={key:2,class:"flex justify-center space-x-4 mt-4"},X={value:""},Y=["value"],Z={value:""},ee=["value"],ae={class:"flex justify-center space-x-4 mt-4"},oe={key:3,class:"flex justify-center items-center"},te=l("div",{class:"loader"},null,-1),le=[te],pe={__name:"AIPhotoEditor",setup(se){const{t:r}=N(),x=$(),g=q(),f=t(""),n=t(!1),u=t(""),y=t(!1),v=t(""),m=t(""),_=t(""),B=[{key:1,value:"295x413"},{key:2,value:"390x567"},{key:3,value:"413x531"},{key:4,value:"1050x1500"},{key:5,value:"1500x1050"}],V=[{key:1,value:"295x413"},{key:2,value:"402x531"},{key:3,value:"130x170"},{key:4,value:"114x156"},{key:5,value:"413x626"},{key:6,value:"144x192"},{key:7,value:"114x156"},{key:8,value:"160x210"},{key:9,value:"413x579"},{key:10,value:"480x640"},{key:11,value:"360x480"},{key:12,value:"358x441"},{key:13,value:"358x441"},{key:14,value:"480x640"},{key:15,value:"295x413"},{key:16,value:"390x567"},{key:17,value:"800x800"},{key:18,value:"700x700"}],A=t({move:!0,crop:!0,cancel:!0,confirm:!0,zoomIn:!0,zoomOut:!0,rotateLeft:!0,rotateRight:!0,flipHorizontal:!0,flipVertical:!0,background:!0,delete:!1,play:!1}),R=t({move:!0,crop:!1,cancel:!1,confirm:!1,zoomIn:!0,zoomOut:!0,rotateLeft:!1,rotateRight:!1,flipHorizontal:!1,flipVertical:!1,background:!1,delete:!0,play:!0}),k=t(x.params.filePath||""),b=t(x.params.imgType||""),j=async o=>{const e=await U("get_local_file_base64",o);return e.code===200?e.data.base64_image:(S.error(e.error_msg),"")},h=async()=>{b.value==="local"?f.value=await j(k.value):f.value=k.value,u.value="",n.value=!1},E=async()=>{const o=await U("open_file_dialog",!1);b.value="local",o.data.file_path&&(k.value=o.data.file_path,await h())},L=()=>{g.back()},T=async()=>{if(u.value){y.value=!0;const o=await K("predict",u.value);o.code===200?g.push({name:"AIPhotoResult",params:{imgUrl:o.data.no_bg_image}}):S.error(o.error_msg),y.value=!1}},D=()=>{console.log("Crop deleted"),u.value="",n.value=!1},F=o=>{console.log("Crop confirmed"),u.value=o,n.value=!0},H=()=>{console.log("Crop canceled")};return G([v,m],([o,e],[a,M])=>{e!==M&&(_.value=e,v.value=""),o!==a&&(_.value=o,m.value="")}),J(async()=>{await h()}),(o,e)=>(s(),p("div",Q,[n.value?d("",!0):(s(),C(P,{key:0,imageUrl:f.value,toolbarOptions:A.value,cropSize:_.value,onConfirm:F,onCancel:H},null,8,["imageUrl","toolbarOptions","cropSize"])),n.value?(s(),C(P,{key:1,imageUrl:u.value,toolbarOptions:R.value,delete:D,play:T},null,8,["imageUrl","toolbarOptions"])):d("",!0),n.value?d("",!0):(s(),p("div",W,[I(l("select",{"onUpdate:modelValue":e[0]||(e[0]=a=>v.value=a),class:"select select-bordered select-sm w-full max-w-xs px-4"},[l("option",X,c(i(r)("ai_photo.common_label")),1),(s(),p(O,null,z(B,a=>l("option",{value:a.value,key:a.key},c(i(r)("ai_photo.common_label_options.option"+a.key)),9,Y)),64))],512),[[w,v.value]]),I(l("select",{"onUpdate:modelValue":e[1]||(e[1]=a=>m.value=a),class:"select select-bordered select-sm w-full max-w-xs px-4"},[l("option",Z,c(i(r)("ai_photo.id_type_label")),1),(s(),p(O,null,z(V,a=>l("option",{value:a.value,key:a.key},c(i(r)("ai_photo.id_type_options.option"+a.key)),9,ee)),64))],512),[[w,m.value]])])),l("div",ae,[l("button",{onClick:e[2]||(e[2]=a=>L()),class:"bg-green-500 text-white px-4 py-2 rounded-full"},c(i(r)("common.btn_back")),1),l("button",{onClick:e[3]||(e[3]=a=>E()),class:"bg-green-500 text-white px-4 py-2 rounded-full"},c(i(r)("common.btn_reselect")),1)]),y.value?(s(),p("div",oe,le)):d("",!0)]))}};export{pe as default};
