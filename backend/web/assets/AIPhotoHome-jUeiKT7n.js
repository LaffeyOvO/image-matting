import{u as y,j as D,o as E,k as x,a as L,c as w,b as t,t as c,g as d,i as I,m as P}from"./index-CDkhBg84.js";import{m as f}from"./message-DMU8knBd.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const R="/photo.png",k={class:"h-full flex flex-col items-center justify-center p-4"},A={class:"text-center"},T={class:"text-3xl font-bold mb-4"},U={class:"mb-8"},F=t("i",{class:"fa-solid fa-image mr-2"},null,-1),j={class:"text-gray-500 mb-4 mt-8"},B=t("div",{class:"mt-8"},[t("img",{src:R,alt:"证件照",class:"rounded shadow-lg h-80 object-cover mx-2"})],-1),H={__name:"AIPhotoHome",setup(V){const{t:i}=y(),l=D(),g=async()=>{const e=await P("open_file_dialog",!1);console.log(e),e.data.file_path&&(console.log(e.file_path),l.push({name:"ImageEditor",params:{filePath:e.data.file_path,imgType:"local"}}))},m=e=>{e.preventDefault();const n=(e.clipboardData||window.Clipboard).items;for(let a=0;a<n.length;a++){const o=n[a];if(o.kind==="string")o.getAsString(r=>{if(b(r))console.log("粘贴的是URL:",r),l.push({name:"ImageEditor",params:{filePath:r,imgType:"url"}});else{f.error("请粘贴图片链接或图片文件");return}});else if(o.kind==="file"){const r=o.type.split("/")[0];if(!["image"].includes(r)){f.error("请粘贴图片文件");return}const v=o.getAsFile(),u=new FileReader;u.onload=_=>{console.log("粘贴的是图片:",_.target.result),l.push({name:"ImageEditor",params:{filePath:_.target.result,imgType:"base64"}})},u.readAsDataURL(v)}}},b=e=>{try{return new URL(e),!0}catch{return!1}};function p(e){e.preventDefault();const s=e.dataTransfer.files;if(s.length){const n=s[0];if(n.type.match("image.*")){const a=new FileReader;a.onload=function(o){l.push({name:"ImageEditor",params:{filePath:o.target.result,imgType:"base64"}})},a.readAsDataURL(n)}}}const h=e=>{e.preventDefault()};return E(()=>{document.addEventListener("paste",m),document.addEventListener("dragover",h),document.addEventListener("drop",p)}),x(()=>{document.removeEventListener("paste",m),document.removeEventListener("dragover",h),document.removeEventListener("drop",p)}),(e,s)=>(L(),w("div",k,[t("div",A,[t("h1",T,c(d(i)("ai_photo.ai_photo_home.title")),1),t("p",U,c(d(i)("ai_photo.ai_photo_home.desc")),1),t("button",{class:"bg-green-500 btn text-white px-4 py-2 rounded-full btn-md",onClick:g},[F,I(" "+c(d(i)("ai_photo.ai_photo_home.upload_btn")),1)]),t("p",j,c(d(i)("ai_photo.ai_photo_home.tips")),1)]),B]))}};export{H as default};
